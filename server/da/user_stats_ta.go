/*
 * Copyright (C) The Qing Project. All rights reserved.
 *
 * Use of this source code is governed by a license that
 * can be found in the LICENSE file.
 */

 /******************************************************************************************
 * This file was automatically generated by mingru (https://github.com/mgenware/mingru)
 * Do not edit this file manually, your changes will be overwritten.
 ******************************************************************************************/

package da

import "github.com/mgenware/mingru-go-lib"

// TableTypeUserStats ...
type TableTypeUserStats struct {
}

// UserStats ...
var UserStats = &TableTypeUserStats{}

// MingruSQLName returns the name of this table.
func (mrTable *TableTypeUserStats) MingruSQLName() string {
	return "user_stats"
}

// ------------ Actions ------------

// UserStatsTableSelectStatsResult ...
type UserStatsTableSelectStatsResult struct {
	AnswerCount     uint `json:"answerCount,omitempty"`
	DiscussionCount uint `json:"discussionCount,omitempty"`
	PostCount       uint `json:"postCount,omitempty"`
	QuestionCount   uint `json:"questionCount,omitempty"`
}

// SelectStats ...
func (mrTable *TableTypeUserStats) SelectStats(queryable mingru.Queryable, id uint64) (UserStatsTableSelectStatsResult, error) {
	var result UserStatsTableSelectStatsResult
	err := queryable.QueryRow("SELECT `post_count`, `discussion_count`, `question_count`, `answer_count` FROM `user_stats` WHERE `id` = ?", id).Scan(&result.PostCount, &result.DiscussionCount, &result.QuestionCount, &result.AnswerCount)
	if err != nil {
		return result, err
	}
	return result, nil
}

// TestSelectAnswerCount ...
func (mrTable *TableTypeUserStats) TestSelectAnswerCount(queryable mingru.Queryable, id uint64) (uint, error) {
	var result uint
	err := queryable.QueryRow("SELECT `answer_count` FROM `user_stats` WHERE `id` = ?", id).Scan(&result)
	if err != nil {
		return result, err
	}
	return result, nil
}

// TestSelectDiscussionCount ...
func (mrTable *TableTypeUserStats) TestSelectDiscussionCount(queryable mingru.Queryable, id uint64) (uint, error) {
	var result uint
	err := queryable.QueryRow("SELECT `discussion_count` FROM `user_stats` WHERE `id` = ?", id).Scan(&result)
	if err != nil {
		return result, err
	}
	return result, nil
}

// TestSelectPostCount ...
func (mrTable *TableTypeUserStats) TestSelectPostCount(queryable mingru.Queryable, id uint64) (uint, error) {
	var result uint
	err := queryable.QueryRow("SELECT `post_count` FROM `user_stats` WHERE `id` = ?", id).Scan(&result)
	if err != nil {
		return result, err
	}
	return result, nil
}

// TestSelectQuestionCount ...
func (mrTable *TableTypeUserStats) TestSelectQuestionCount(queryable mingru.Queryable, id uint64) (uint, error) {
	var result uint
	err := queryable.QueryRow("SELECT `question_count` FROM `user_stats` WHERE `id` = ?", id).Scan(&result)
	if err != nil {
		return result, err
	}
	return result, nil
}

// UpdateAnswerCount ...
func (mrTable *TableTypeUserStats) UpdateAnswerCount(queryable mingru.Queryable, userID uint64, offset int) error {
	result, err := queryable.Exec("UPDATE `user_stats` SET `answer_count` = `answer_count` + ? WHERE `id` = ?", offset, userID)
	return mingru.CheckOneRowAffectedWithError(result, err)
}

// UpdateDiscussionCount ...
func (mrTable *TableTypeUserStats) UpdateDiscussionCount(queryable mingru.Queryable, userID uint64, offset int) error {
	result, err := queryable.Exec("UPDATE `user_stats` SET `discussion_count` = `discussion_count` + ? WHERE `id` = ?", offset, userID)
	return mingru.CheckOneRowAffectedWithError(result, err)
}

// UpdatePostCount ...
func (mrTable *TableTypeUserStats) UpdatePostCount(queryable mingru.Queryable, userID uint64, offset int) error {
	result, err := queryable.Exec("UPDATE `user_stats` SET `post_count` = `post_count` + ? WHERE `id` = ?", offset, userID)
	return mingru.CheckOneRowAffectedWithError(result, err)
}

// UpdateQuestionCount ...
func (mrTable *TableTypeUserStats) UpdateQuestionCount(queryable mingru.Queryable, userID uint64, offset int) error {
	result, err := queryable.Exec("UPDATE `user_stats` SET `question_count` = `question_count` + ? WHERE `id` = ?", offset, userID)
	return mingru.CheckOneRowAffectedWithError(result, err)
}
